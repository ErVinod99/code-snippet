{% extends "dashboard_layout.html" %}

{% block body %}
<div class="row">
    <!-- column -->
    <div class="col-sm-12">
        <div class="card">
            <div class="card-block">
                <h4 class="card-title">List of Users</h4>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Action</th>
                                <th>Sr.No.</th>
                                <th>Name</th>
                                <th>User id</th>
                                <th>Email</th>
                                <th>Std</th>
                                <th>Role</th>
                                <th>Subjects</th>
                                <th>Payment status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in users['user_data']|sort(reverse=False) %}
                            <tr>
                                <td><a href="/update/{{ user[0] }}" class="btn btn-warning btn-xs"
                                        data-toggle="modal" data-target="#modaledit{{ user[0] }}">Edit</a>
                                </td>
                                <td>{{ user[0] }}</td>
                                <td>{{ user[6] }} {{ user[7] }}</td>

                                <td>{{ user[2] }}</td>
                                <td>{{ user[3] }}</td>
                                <td>{{ user[10] }}</td>


                                {% if user[14] == 1 %}
                                <td>Student</td>
                                {% endif %}

                                {% if user[14] == 2 %}
                                <td>Faculty</td>
                                {% endif %}

                                {% if user[14] == 3 %}
                                <td>Admin</td>
                                {% endif %}
                                
                                <td>{{ user[11] }}</td>
                                <td>{{ user[13] }} </td>
                            </tr>

                <!-- Modal Edit Users-->
                <div id="modaledit{{user[0]}}" class="modal fade" role="dialog">
                    <div class="modal-dialog">


                        <div class="modal-content">


                            <div class="modal-header">


                                <h4 class="modal-title">Update Information</h4>


                            </div>


                            <div class="modal-body">


                                <form action="{{url_for('update_users')}}" method="POST">
                                    <div class="form-group">


                                        <label>Email:</label>
                                        

                                        <input type="text" class="form-control" name="email" value="{{user[3]}}">


                                    </div>
                                    
                                    <div class="form-group">


                                        <label>Password:</label>
                                        <input type="hidden"  name="u_id" value="{{user[0]}}">

                                        <input type="text" class="form-control" name="password" value="{{ user[5] }}">
                                        <small>Enter new password here</small>


                                    </div>





                                    <div class="form-group">


                                        <label>Payment Status:</label>

                                        <input type="text" class="form-control" name="payment_status" value="{{user[13]}}">
                                        <small>Tip: True = Payment done, False = Payment pending.  </small>




                                        <div class="form-group">


                                            <button class="btn btn-primary m-t-10" type="submit">Update</button>


                                        </div>


                                </form>


                            </div>


                            <div class="modal-footer">


                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>


                            </div>


                        </div>


                    </div>

                </div>

                            {% endfor %}
                        </tbody>
                    </table>
                </div>









            </div>

        </div>
    </div>
</div>





{% endblock %}